(this.webpackJsonpmyreadss=this.webpackJsonpmyreadss||[]).push([[0],{35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var s=n(0),c=n(21),o=n.n(c),a=n(8),r=n(17),i=n(7),l=n(18),u=n(2),h=n(1),d=function(e){return Object(h.jsxs)("div",{className:"bookshelf",children:[Object(h.jsx)("h2",{className:"bookshelf-title",children:e.shelf}),Object(h.jsx)("div",{className:"bookshelf-books",children:Object(h.jsx)("ol",{className:"books-grid",children:Array.isArray(e.books)&&e.books.map((function(t,n){return Object(h.jsx)("li",{children:Object(h.jsxs)("div",{className:"book",children:[Object(h.jsxs)("div",{className:"book-top",children:[Object(h.jsx)("div",{className:"book-cover",style:{width:128,height:170,backgroundImage:t.imageLinks?"url(".concat(t.imageLinks.thumbnail,")"):"url(https://dummyimage.com/128x170/4f4f4f/ffffff.jpg&text=No+Book+Art)"}}),Object(h.jsx)("div",{className:"book-shelf-changer",children:Object(h.jsxs)("select",{value:t.shelf,onChange:function(n){return e.updateShelf(t,n.target.value)},children:[Object(h.jsx)("option",{disabled:!0,children:"Move to..."}),Object(h.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(h.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(h.jsx)("option",{value:"read",children:"Read"}),Object(h.jsx)("option",{value:"none",children:"None"})]})})]}),Object(h.jsx)("div",{className:"book-title",children:t.title}),Object(h.jsx)("div",{className:"book-authors",children:Array.isArray(t.authors)?t.authors.join(", "):""})]})},n)}))})})]})},b=function(e){return Object(h.jsxs)("div",{className:"list-books",children:[Object(h.jsx)("div",{className:"list-books-title",children:Object(h.jsx)("h1",{children:"MyReads"})}),Object(h.jsxs)("div",{className:"list-books-content",children:[Object(h.jsx)(d,{updateShelf:e.updateShelf,shelf:"Currently Reading",books:e.books.filter((function(e){return"currentlyReading"===e.shelf}))}),",",Object(h.jsx)(d,{updateShelf:e.updateShelf,shelf:"Want to Read",books:e.books.filter((function(e){return"wantToRead"===e.shelf}))}),",",Object(h.jsx)(d,{updateShelf:e.updateShelf,shelf:"Read",books:e.books.filter((function(e){return"read"===e.shelf}))})]}),Object(h.jsx)("div",{className:"open-search",children:Object(h.jsx)(a.b,{to:"/search",children:"Add a book"})})]})},j=n(23),f=n.n(j),O=function(e){return Object(s.useEffect)((function(){e.emptybooks()}),[]),Object(h.jsxs)("div",{className:"search-books",children:[Object(h.jsxs)("div",{className:"search-books-bar",children:[Object(h.jsx)(a.b,{className:"close-search",to:"/",children:"Close"}),Object(h.jsx)("div",{className:"search-books-input-wrapper",children:Object(h.jsx)(f.a,{debounceTimeout:325,element:"input",type:"text",value:e.books.string,onChange:e.searchQuery,placeholder:"Search by title or author"})})]}),Object(h.jsx)("div",{className:"search-books-results",children:Object(h.jsx)(d,{updateShelf:e.updateShelf,shelf:"Search Results",books:e.books})})]})},p=(n(35),"https://reactnd-books-api.udacity.com"),k=localStorage.token;k||(k=localStorage.token=Math.random().toString(36).substr(-8));var m={Accept:"application/json",Authorization:k},x=function(e){var t=Object(s.useState)([]),n=Object(l.a)(t,2),c=n[0],o=n[1],a=Object(s.useState)([]),d=Object(l.a)(a,2),j=d[0],f=d[1];Object(s.useEffect)((function(){fetch("".concat(p,"/books"),{headers:m}).then((function(e){return e.json()})).then((function(e){return e.books})).then((function(e){o(e)}))}));var k=function(){return f([])},x=function(e){var t=e.target.value;""!==t?function(e,t){return fetch("".concat(p,"/search"),{method:"POST",headers:Object(i.a)(Object(i.a)({},m),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e,maxResults:t})}).then((function(e){return e.json()})).then((function(e){return e.books}))}(t).then((function(e){if(e&&!e.error){var n=e.map((function(e){return c.forEach((function(t){t.id===e.id&&(e.shelf=t.shelf)})),e}));f(n)}else f(t)})):f([])},v=function(e,t){if("none"===t){var n=c.filter((function(t){return t.id!==e.id}));o(n)}e.shelf!==t&&function(e,t){return fetch("".concat(p,"/books/").concat(e.id),{method:"PUT",headers:Object(i.a)(Object(i.a)({},m),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))}(e,t).then((function(){var n=c.map((function(e){return e.id})),s=c.map((function(e){return e.id})),a=[],l=[];n.includes(e.id)||s.includes(e.id)?(a=c.map((function(n){return n.id===e.id?Object(i.a)(Object(i.a)({},n),{},{shelf:t}):n})),l=j.map((function(n){return n.id===e.id?Object(i.a)(Object(i.a)({},n),{},{shelf:t}):n}))):(e.shelf=t,a=[].concat(Object(r.a)(c),[e]),l=[].concat(Object(r.a)(j),[e])),o(a),f(l)}))};return Object(h.jsxs)("div",{className:"app",children:[Object(h.jsx)(u.a,{path:"/search",exact:!0,render:function(){return Object(h.jsx)(O,{emptybooks:k,searchQuery:x,updateShelf:v,books:j})}}),Object(h.jsx)(u.a,{path:"/",exact:!0,render:function(){return Object(h.jsx)(b,{updateShelf:v,books:c})}})]})};n(36);o.a.render(Object(h.jsx)(a.a,{children:Object(h.jsx)(x,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.3a406f85.chunk.js.map